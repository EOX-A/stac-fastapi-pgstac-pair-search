CREATE OR REPLACE FUNCTION T_DIFF(a TIMESTAMPTZ, b TIMESTAMPTZ)
RETURNS INTERVAL AS $$
BEGIN
  RETURN CASE
    WHEN a >= b THEN a - b
    ELSE b - a
  END;
END;
$$ LANGUAGE plpgsql;
